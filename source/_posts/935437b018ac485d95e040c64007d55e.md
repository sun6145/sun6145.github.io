---
layout: post
title: Javaå­—ç¬¦ã€Stringã€æ ¼å¼åŒ–è¾“å‡ºã€è¾“å…¥è¾“å‡º
abbrlink: 935437b018ac485d95e040c64007d55e
tags:
  - java
categories:
  - JDK
  - åŸºç¡€ç¯‡
date: 1745339269534
updated: 1746417294853
---

è¿™ç¯‡æ–‡ç« ä»‹ç»äº†å­—ç¬¦ç¼–ç çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬ ASCII ç¼–ç ã€å„å›½æ‰©å±•ç¼–ç ï¼ˆå¦‚ GB2312ã€GBK ç­‰ï¼‰ã€Unicode ç¼–ç æ ‡å‡†ä»¥åŠç›¸å…³æŠ€æœ¯ã€‚æ–‡ç« è¿˜è¯¦ç»†è§£é‡Šäº†åœ¨ Java ä¸­å¦‚ä½•å¤„ç†å­—ç¬¦ç¼–ç é—®é¢˜ï¼Œæ¶‰åŠå­—ç¬¦ä¸²çš„åˆ›å»ºã€æ‹¼æ¥æ–¹æ³•ã€ç¼–ç è½¬æ¢ã€æ–‡ä»¶è¾“å…¥è¾“å‡ºç­‰æ–¹é¢ï¼Œå¹¶æä¾›äº†ä¸€äº›å®ç”¨å»ºè®®å’Œåœºæ™¯åˆ†æã€‚

<!-- more -->

***

## å­—ç¬¦ç¼–ç åŸºç¡€

è®¡ç®—æœºåªè®¤è¯†æ•°å­—ï¼Œæ‰€ä»¥éœ€è¦ç¼–ç å°†å­—ç¬¦æ˜ å°„ä¸ºæ•°å­—ï¼š

### ASCII ç¼–ç ï¼ˆ1963 å¹´ï¼‰

- **åœºæ™¯**ï¼šè®¡ç®—æœºåˆšè¯ç”Ÿæ—¶ä¸»è¦ç”¨äºç¾å›½
- **ç‰¹ç‚¹**ï¼š
  - 7 ä½ç¼–ç ï¼ˆå®é™…ç”¨ 1 å­—èŠ‚å­˜å‚¨ï¼‰ï¼Œå…± 128 ä¸ªå­—ç¬¦
  - åŒ…å«è‹±æ–‡å¤§å°å†™ã€æ•°å­—ã€æ ‡ç‚¹ç¬¦å·å’Œæ§åˆ¶å­—ç¬¦
  - ä¾‹å¦‚ï¼š`A` â†’ 65ï¼ˆ0x41ï¼‰ï¼Œ`0` â†’ 48ï¼ˆ0x30ï¼‰
- **è‡´å‘½ç¼ºé™·**ï¼šæ— æ³•è¡¨ç¤ºå…¶ä»–è¯­è¨€å­—ç¬¦, **å°±åƒåªæœ‰è‹±æ–‡å­—æ¯çš„é”®ç›˜ï¼Œå®Œå…¨æ— æ³•è¾“å…¥ä¸­æ–‡**

### å„å›½æ‰©å±•ç¼–ç ï¼ˆ1980 å¹´ä»£ï¼‰

å„å›½åŸºäº ASCII æ‰©å±•è‡ªå·±çš„ç¼–ç æ ‡å‡†ï¼Œå½¢æˆ"ç¼–ç æˆ˜å›½æ—¶ä»£"ï¼š

- âš ï¸ **é—®é¢˜**ï¼šä¸åŒç¼–ç äº’ä¸å…¼å®¹, **ç›¸å½“äºå¹¿ä¸œäººè®²ç²¤è¯­ï¼Œä¸Šæµ·äººè®²å´è¯­ï¼Œäº’ç›¸å¬ä¸æ‡‚**
- æ‰“å¼€æ–‡ä»¶æ—¶é€‰é”™ç¼–ç å°±ä¼šä¹±ç ï¼ˆå¸¸è§"çƒ«çƒ«çƒ«"ä¹±ç ï¼‰

> ä¸­æ–‡ä¸–ç•Œ

- **GB2312ï¼ˆ1980ï¼‰**ï¼š
  - é¦–ä¸ªä¸­æ–‡ç¼–ç æ ‡å‡†
  - åŒ…å« 6763 ä¸ªæ±‰å­—ï¼ˆç®€ä½“ï¼‰å’Œ 682 ä¸ªç¬¦å·
  - **ä¾‹**ï¼š`ä¸­` â†’ 0xD6D0ï¼ˆä¸¤ä¸ªå­—èŠ‚ï¼‰
- **GBKï¼ˆ1993ï¼‰**ï¼š
  - GB2312 çš„æ‰©å±•ç‰ˆï¼Œæ”¯æŒç¹ä½“å­—å’Œæ›´å¤šç”Ÿåƒ»å­—
  - åŒ…å« 21886 ä¸ªæ±‰å­—
  - **ç‰¹ç‚¹**ï¼šå…¼å®¹ GB2312ï¼Œéå®˜æ–¹æ ‡å‡†ä½†è¢«å¹¿æ³›ä½¿ç”¨
- **GB18030ï¼ˆ2000ï¼‰**ï¼š
  - å›½å®¶å¼ºåˆ¶æ ‡å‡†ï¼Œæ”¯æŒå…¨éƒ¨ Unicode å­—ç¬¦
  - å˜é•¿ç¼–ç ï¼ˆ1/2/4 å­—èŠ‚ï¼‰

> å…¶ä»–åœ°åŒº

| ç¼–ç åç§°       | é€‚ç”¨åœ°åŒº  | ç‰¹ç‚¹             |
| ---------- | ----- | -------------- |
| BIG5       | å°æ¹¾/é¦™æ¸¯ | ç¹ä½“ä¸­æ–‡ï¼Œ13053 ä¸ªæ±‰å­— |
| Shift\_JIS | æ—¥æœ¬    | åŒ…å«å‡åå’Œæ—¥æ–‡æ±‰å­—      |
| EUC-KR     | éŸ©å›½    | éŸ©æ–‡å­—ç¬¦ç¼–ç          |

### Unicodeï¼ˆ1991 å¹´ï¼‰

ä¸ºäº†è§£å†³ç¼–ç "é—®é¢˜ï¼Œå›½é™…ç»„ç»‡åˆ¶å®šäº† Unicode æ ‡å‡†ï¼š

æ ¸å¿ƒæ€æƒ³ï¼š

- **ä¸ºåœ°çƒä¸Šæ‰€æœ‰å­—ç¬¦åˆ†é…å”¯ä¸€æ•´æ•°ç¼–å·**ï¼ˆCode Pointï¼‰ï¼Œç§°ä¸ºç ç‚¹ï¼Œæ ¼å¼ä¸º `U+XXXXXX`ï¼ˆåå…­è¿›åˆ¶ï¼‰, ä¾‹å¦‚ï¼Œå­—æ¯ A çš„ç ç‚¹æ˜¯` U+0041`ï¼Œæ±‰å­—ã€Œä¸¥ã€çš„ç ç‚¹æ˜¯ `U+4E25`ã€‚
- ç ç‚¹èŒƒå›´ä» U+0000 åˆ° U+10FFFFï¼Œè¦†ç›–è¶…è¿‡ 130 ä¸‡ä¸ªå­—ç¬¦ã€‚
- **å·²æ”¶å½•è¶…è¿‡ 14 ä¸‡ä¸ªå­—ç¬¦**ï¼ˆåŒ…å«æ±‰å­—ã€emojiã€å¤æ–‡å­—ç­‰ï¼‰

å®ç°æ–¹å¼ï¼š

| ç¼–ç æ–¹æ¡ˆ   | ç‰¹ç‚¹                    | å…¸å‹åº”ç”¨åœºæ™¯          |
| ------ | --------------------- | --------------- |
| UTF-8  | å˜é•¿ç¼–ç ï¼ˆ1-4 å­—èŠ‚ï¼‰ï¼Œå…¼å®¹ ASCII | äº’è”ç½‘ä¼ è¾“ã€Linux ç³»ç»Ÿ  |
| UTF-16 | å¤§éƒ¨åˆ†å­—ç¬¦ç”¨ 2 å­—èŠ‚ï¼Œéƒ¨åˆ†ç”¨ 4 å­—èŠ‚  | Javaã€Windows å†…éƒ¨ |
| UTF-32 | å›ºå®š 4 å­—èŠ‚ï¼Œç©ºé—´æµªè´¹ä½†å¤„ç†ç®€å•     | ç‰¹æ®Šé¢†åŸŸåº”ç”¨          |

## Java å­—ç¬¦

Java çš„ `char ç±»å‹`æ˜¯ **UTF-16 ä»£ç å•å…ƒ**ï¼ˆCode Unitï¼‰ï¼Œä¸æ˜¯å®Œæ•´çš„ Unicode å­—ç¬¦ï¼ˆCode Pointï¼‰ã€‚

### ç”Ÿæ´»ä¸­çš„æ¯”å–»

- **`char` æ˜¯å­˜å‚¨å•ä½**ï¼šæ¯ä¸ª `char` å›ºå®šä¸º 2 å­—èŠ‚ï¼ˆUTF-16 çš„ä»£ç å•å…ƒï¼‰
- **å­—ç¬¦æ˜¯é€»è¾‘å•ä½**ï¼šä¸€ä¸ªå­—ç¬¦å¯èƒ½éœ€è¦ 1 ä¸ªæˆ– 2 ä¸ª `char` æ¥å­˜å‚¨

å‡è®¾æˆ‘ä»¬è¦åœæ”¾ä¸åŒç±»å‹çš„è½¦è¾†ï¼š

- **æ™®é€šè½¿è½¦**ï¼šå ç”¨ **1 ä¸ªåœè½¦ä½**ï¼ˆå¯¹åº” BMP å­—ç¬¦ï¼Œ1 ä¸ª `char`ï¼‰
- **åŠ é•¿è´§è½¦**ï¼šéœ€è¦ **2 ä¸ªåœè½¦ä½**ï¼ˆå¯¹åº”è¾…åŠ©å¹³é¢å­—ç¬¦ï¼Œ2 ä¸ª `char`ï¼‰

è¿™é‡Œçš„ `char` å°±åƒæ˜¯å›ºå®šå¤§å°çš„åœè½¦ä½ï¼Œè€Œ **å­—ç¬¦æœ¬èº«æ‰æ˜¯è½¦è¾†**ã€‚è½¦è¾†çš„å¤§å°å†³å®šäº†éœ€è¦å ç”¨å‡ ä¸ªåœè½¦ä½ã€‚

```java
String s = "Ağ„"; // åŒ…å«ä¸¤ä¸ªå­—ç¬¦ï¼šA(U+0041) å’Œ ä¹ç¬¦ğ„(U+1D11E)
System.out.println(s.length()); // è¾“å‡º 3ï¼ˆAç”¨1ä¸ªcharï¼Œğ„ç”¨2ä¸ªcharï¼‰
```

### è·å–å®é™…å­—ç¬¦æ•°

```java
String s = "HelloğŸ˜Š";
int realLength = s.codePointCount(0, s.length()); // è¿”å› 6ï¼ˆH,e,l,l,o,ğŸ˜Šï¼‰
```

### æ­£ç¡®éå†å­—ç¬¦

```java
for (int i = 0; i < s.length(); ) {
    int codePoint = s.codePointAt(i);
    System.out.println(Character.toChars(codePoint));
    i += Character.charCount(codePoint); // è‡ªåŠ¨è·³è¿‡ä»£ç†å¯¹
}
```

### åˆ¤æ–­æ˜¯å¦å®Œæ•´å­—ç¬¦

```java
char c = s.charAt(5);
if (Character.isHighSurrogate(c)) { // åˆ¤æ–­æ˜¯å¦æ˜¯ä»£ç†å¯¹çš„ä¸€éƒ¨åˆ†
    System.out.println("è¿™æ˜¯åŠä¸ªå­—ç¬¦ï¼");
}
```

## å­—ç¬¦ä¸²

ä»æ¦‚å¿µä¸Šè®²ï¼Œ Java å­—ç¬¦ä¸²å°±æ˜¯ Unicode å­—ç¬¦åºåˆ—ã€‚Java æ²¡æœ‰å†…ç½®çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œ è€Œæ˜¯åœ¨æ ‡å‡† Java ç±»åº“ä¸­æä¾›äº†ä¸€ä¸ªé¢„å®šä¹‰ç±»ï¼Œå¾ˆè‡ªç„¶åœ°å«åš Stringã€‚æ¯ä¸ªç”¨åŒå¼•å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²éƒ½æ˜¯ String ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚

```java
String e = ""; // an empty string
String greeting = "Hello";
```

### String ç±»çš„æ ¸å¿ƒç‰¹æ€§

1. **ä¸å¯å˜æ€§ï¼ˆImmutableï¼‰**

   - å­—ç¬¦ä¸²ä¸€æ—¦åˆ›å»ºï¼Œå…¶å†…å®¹ä¸å¯ä¿®æ”¹ï¼ˆå†…å®¹ä¸å¯å˜ï¼Œå¼•ç”¨å¯å˜ï¼‰
   - ä¼˜åŠ¿ï¼š
     - çº¿ç¨‹å®‰å…¨ï¼šæ— éœ€åŒæ­¥å³å¯åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨
     - ç¼“å­˜å“ˆå¸Œå€¼ï¼šString æ˜¯ HashMap çš„å¸¸ç”¨é”®ï¼Œå“ˆå¸Œå€¼åªéœ€è®¡ç®—ä¸€æ¬¡
     - å®‰å…¨æ€§ï¼šç”¨äºç½‘ç»œè¿æ¥ã€æ–‡ä»¶è·¯å¾„ç­‰æ•æ„Ÿä¿¡æ¯å¤„ç†æ›´å®‰å…¨
     - å­—ç¬¦ä¸²æ± ä¼˜åŒ–ï¼šå‡å°‘å†…å­˜æ¶ˆè€—ï¼Œæé«˜é‡ç”¨æ€§

2. **åº•å±‚å­˜å‚¨æ¼”è¿›**

   - JDK8 åŠä»¥å‰ï¼š`char[]`å­˜å‚¨ï¼ˆæ¯ä¸ªå­—ç¬¦å  2 å­—èŠ‚ï¼‰

   - JDK9+ï¼š

     ```
     byte[]
     ```

     å­˜å‚¨ + ç¼–ç æ ‡è®°å­—æ®µ

     - ä¼˜åŠ¿ï¼šå¯¹ Latin-1 å­—ç¬¦ï¼ˆISO-8859-1ï¼‰èŠ‚çœ 50%å†…å­˜ç©ºé—´
     - è‡ªåŠ¨è¯†åˆ«ç¼–ç ï¼šLatin-1ï¼ˆ1 å­—èŠ‚ï¼‰å’Œ UTF-16ï¼ˆ2 å­—èŠ‚ï¼‰

3. **å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Poolï¼‰**

   - JVM çš„å †å†…å­˜ä¸­çš„ç‰¹æ®Šå­˜å‚¨åŒºåŸŸï¼ˆJDK7 å‰ä½äºæ°¸ä¹…ä»£ï¼ŒJDK7+ç§»è‡³å †åŒºï¼‰
   - ç¼“å­˜æœºåˆ¶ï¼šç›¸åŒå†…å®¹çš„å­—ç¬¦ä¸²å­—é¢é‡å…±äº«åŒä¸€å†…å­˜åœ°å€
   - æ‰‹åŠ¨å…¥æ± ï¼š`intern()`æ–¹æ³•ï¼ˆå°†æ­¤ String å¯¹è±¡æ·»åŠ åˆ°æ± ä¸­ï¼Œå¹¶ä¸”è¿”å›æ­¤æ± ä¸­å¯¹è±¡çš„å¼•ç”¨ã€‚ï¼‰

### å­—ç¬¦ä¸²åˆ›å»ºæœºåˆ¶

| åˆ›å»ºæ–¹å¼         | å†…å­˜åˆ†é…                   | ç¤ºä¾‹                    | å¯¹è±¡æ•°é‡  |
| ------------ | ---------------------- | --------------------- | ----- |
| ç›´æ¥èµ‹å€¼         | ä¼˜å…ˆæ£€æŸ¥å­—ç¬¦ä¸²æ± ï¼Œå­˜åœ¨åˆ™å¤ç”¨         | `String s = "Java";`  | 0 æˆ– 1 |
| new String() | å¼ºåˆ¶åœ¨å †ä¸­åˆ›å»ºæ–°å¯¹è±¡             | `new String("Java");` | 1 æˆ– 2 |
| å­—é¢é‡æ‹¼æ¥ï¼ˆç¼–è¯‘ä¼˜åŒ–ï¼‰  | ç¼–è¯‘æœŸä¼˜åŒ–ä¸ºæœ€ç»ˆç»“æœ             | `"Ja" + "va"`         | 1     |
| å«å˜é‡çš„æ‹¼æ¥       | è¿è¡Œæ—¶é€šè¿‡ StringBuilder å¤„ç† | `s1 + s2`             | å¤šä¸ª    |

```java
String s1 = new String("Hello");
// å½“"Hello"é¦–æ¬¡å‡ºç°æ—¶ï¼šåœ¨å †ä¸­åˆ›å»º1ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼ŒåŒæ—¶åœ¨å­—ç¬¦ä¸²æ± ä¸­åˆ›å»º1ä¸ªå¯¹è±¡
// æ€»å…±åˆ›å»º2ä¸ªå¯¹è±¡ï¼ˆè‹¥æ± ä¸­å·²å­˜åœ¨"Hello"ï¼Œåˆ™åªåˆ›å»º1ä¸ªå †å¯¹è±¡ï¼‰
```

### å­—ç¬¦ä¸²æ‹¼æ¥

1. **+ è¿ç®—ç¬¦åŸç†**

   - ç¼–è¯‘æœŸä¼˜åŒ–ï¼šçº¯å­—é¢é‡æ‹¼æ¥ç›´æ¥åˆå¹¶ï¼ˆ`"a"+"b"` â†’ `"ab"`ï¼‰

     ```java
     String s = â€œaâ€+â€œbâ€+â€câ€; // ç¼–è¯‘æ—¶ä¼˜åŒ–å®é™…åªåˆ›å»ºäº†1ä¸ªå¯¹è±¡ï¼Œå³"abc"ã€‚

     String str1 = "111111";
     String str2 = "222222";
     String str = str1 + str2;
     System.out.println(str); // ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ï¼š"111111222222"
     ```

   - è¿è¡Œæ—¶å¤„ç†ï¼šè‡ªåŠ¨è½¬æ¢ä¸º StringBuilder æ“ä½œ

     ```java
       0: ldc           #2                  // String 111111
       2: astore_1
       3: ldc           #3                  // String 222222
       5: astore_2
       6: new           #4                  // class java/lang/StringBuilder
       9: dup
       10: invokespecial #5                  // Method java/lang/StringBuilder."":()V
       13: aload_1
       14: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
       17: aload_2
       18: invokevirtual #6                  // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
       21: invokevirtual #7                  // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
       24: astore_3
       25: getstatic     #8                  // Field java/lang/System.out:Ljava/io/PrintStream;
       28: aload_3
       29: invokevirtual #9                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V
       32: return
     ```

   - å¯¹äº java æ¥è¯´ï¼Œè¿™æ®µä»£ç åŸç†ä¸Šåº”è¯¥æ˜¯ï¼š

     ```java
     String str1 = "111111";
     String str2 = "222222";
     // ç­‰æ•ˆå®ç°
     StringBuilder sb = new StringBuilder();
     sb.append(str1);
     sb.append(str2);
     String str = sb.toString();
     System.out.println(str);
     ```

2. **ç‰¹æ®Šå€¼å¤„ç†**

   - `null`å€¼æ‹¼æ¥ï¼šè‡ªåŠ¨è½¬æ¢ä¸º"null"å­—ç¬¦ä¸²

     ```java
     String s = null + "Java"; // ç»“æœï¼š"nullJava"

     // StringBuilder#append(sb)
     public StringBuilder append(StringBuffer sb) {
         super.append(sb);
         return this;
     }
     //çœ‹AbstractStringBuilderç±»ä¸­appendæ–¹æ³•
     @Override
     public AbstractStringBuilder append(CharSequence s) {
         if (s == null)
             return appendNull();
         if (s instanceof String)
             return this.append((String)s);
         if (s instanceof AbstractStringBuilder)
             return this.append((AbstractStringBuilder)s);

         return this.append(s, 0, s.length());
     }

     private AbstractStringBuilder appendNull() {
         int c = count;
         ensureCapacityInternal(c + 4);
         final char[] value = this.value;
         value[c++] = 'n';
         value[c++] = 'u';
         value[c++] = 'l';
         value[c++] = 'l';
         count = c;
         return this;
     }
     ```

3. é™¤äº†ä½¿ç”¨`+`æ‹¼æ¥å­—ç¬¦ä¸²ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ String ç±»ä¸­çš„æ–¹æ³•`concat`æ–¹æ³•æ¥æ‹¼æ¥å­—ç¬¦ä¸²ã€‚å¦‚ï¼š

   ```java
   String country = "china";
   String city = "Shanghai";
   String address = country.concat(",").concat(city);
   ```

4. **æ€§èƒ½å¯¹æ¯”**

   | æ‹¼æ¥æ–¹å¼            | é€‚ç”¨åœºæ™¯         | æ€§èƒ½æ¶ˆè€—                  |
   | --------------- | ------------ | --------------------- |
   | + è¿ç®—ç¬¦           | ç®€å•æ‹¼æ¥æˆ–å°‘é‡æ“ä½œ    | äº§ç”Ÿä¸´æ—¶ StringBuilder å¯¹è±¡ |
   | StringBuilder   | å¾ªç¯ä½“æˆ–å¤§è§„æ¨¡å­—ç¬¦ä¸²æ“ä½œ | æœ€ä¼˜ï¼ˆéçº¿ç¨‹å®‰å…¨ï¼‰             |
   | StringBuffer    | å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å­—ç¬¦ä¸²æ“ä½œ | æ¬¡ä¼˜ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰              |
   | String.concat() | å°‘é‡ç¡®å®šå­—ç¬¦ä¸²æ‹¼æ¥    | æ¯æ¬¡åˆ›å»ºæ–° String å¯¹è±¡       |

### æ ¸å¿ƒæ–¹æ³•è¯¦è§£

1. **å¯¹è±¡æ¯”è¾ƒ**

   ```java
   // æ­£ç¡®æ¯”è¾ƒæ–¹å¼
   str1.equals(str2);          // åŒºåˆ†å¤§å°å†™æ¯”è¾ƒ
   str1.equalsIgnoreCase(str2); // ä¸åŒºåˆ†å¤§å°å†™
   ```

2. **å­ä¸²å¤„ç†**

   ```java
   "HelloWorld".substring(5);     // "World"ï¼ˆå«ç´¢å¼•5ï¼‰
   "HelloWorld".substring(5,7);   // "Wo"ï¼ˆ[5,7)åŒºé—´ï¼‰
   ```

3. **æ¨¡å¼åŒ¹é…**

   ```java
   // æ­£åˆ™è¡¨è¾¾å¼åˆ†å‰²
   String[] parts = "a,b;c".split("[,;]"); // ["a","b","c"]

   // å¼€å¤´/ç»“å°¾æ£€æµ‹
   "file.txt".endsWith(".txt");   // true
   "2023_report".startsWith("2023"); // true
   ```

4. **ç¼–ç è½¬æ¢**

   ```java
   // String â†” byte[]ï¼ˆéœ€æŒ‡å®šå­—ç¬¦é›†ï¼‰
   byte[] utf8Bytes = str.getBytes(StandardCharsets.UTF_8);
   String decoded = new String(utf8Bytes, "UTF-8");
   ```

### String ç±»å‹è½¬æ¢

1. **String â†” åŸºæœ¬ç±»å‹**

   ```java
   // Stringè½¬æ•°å­—
   int num = Integer.parseInt("123");     // æ¨èæ–¹å¼
   double d = Double.parseDouble("3.14");

   // æ•°å­—è½¬String
   String s1 = String.valueOf(123);       // æœ€ä½³å®è·µ
   String s2 = Integer.toString(456);
   ```

2. **String â†” char\[]**

   ```java
   char[] chars = "Java".toCharArray();    // Stringè½¬æ•°ç»„
   String s = new String(new char[]{'J','a','v','a'}); // æ•°ç»„è½¬String
   ```

### å®è·µå»ºè®®

1. **å¾ªç¯æ‹¼æ¥ä¼˜åŒ–**

   ```java
   // é”™è¯¯ç¤ºèŒƒï¼ˆäº§ç”Ÿå¤§é‡ä¸´æ—¶å¯¹è±¡ï¼‰
   String result = "";
   for (int i=0; i<1000; i++) {
       result += i;
   }

   // æ­£ç¡®åšæ³•
   StringBuilder sb = new StringBuilder();
   for (int i=0; i<1000; i++) {
       sb.append(i);
   }
   String result = sb.toString();
   ```

2. **æ•æ„Ÿä¿¡æ¯å¤„ç†**

   ```java
   // å»ºè®®æ¸…ç©ºæ•æ„Ÿæ•°æ®
   char[] password = ...;
   // ä½¿ç”¨åç«‹å³æ¸…ç©º
   Arrays.fill(password, '\0');
   ```

3. **å›½é™…åŒ–æ”¯æŒ**

   ```java
   // æ¯”è¾ƒæ—¶æŒ‡å®šLocale
   "TITLE".equalsIgnoreCase("title"); // ä¾èµ–é»˜è®¤Locale
   // æ›´å¥½çš„æ–¹å¼
   String.CASE_INSENSITIVE_ORDER.compare(str1, str2);
   ```

### æ„é€ æ–¹æ³•

| æ–¹æ³•                                     | è¯´æ˜             |
| :------------------------------------- | :------------- |
| String()                               | åˆ›å»ºä¸€ä¸ªå†…å®¹ä¸ºç©ºçš„å­—ç¬¦ä¸²   |
| String(byte\[])                        | æ ¹æ®æŒ‡å®šçš„å­—èŠ‚æ•°ç»„åˆ›å»ºå¯¹è±¡  |
| String(byte\[]ï¼Œintï¼Œint)                | æ ¹æ®å­—èŠ‚æ•°ç»„çš„ä¸€éƒ¨åˆ†åˆ›å»ºå¯¹è±¡ |
| String(char\[])                        | æ ¹æ®æŒ‡å®šçš„å­—ç¬¦æ•°ç»„åˆ›å»ºå¯¹è±¡  |
| String(char\[]ï¼Œintï¼Œint)                | æ ¹æ®å­—ç¬¦æ•°ç»„çš„ä¸€éƒ¨åˆ†åˆ›å»ºå¯¹è±¡ |
| String(String)                         | æ ¹æ®æŒ‡å®šçš„å­—ç¬¦ä¸²å†…å®¹åˆ›å»ºå¯¹è±¡ |
| String(byte\[] bytes, Charset charset) | ä½¿ç”¨æŒ‡å®šçš„ç¼–ç æ„é€ å­—ç¬¦ä¸²å¯¹è±¡ |

### æˆå‘˜æ–¹æ³•

| æ–¹æ³•å                           | æè¿°                                                                                                |
| ----------------------------- | ------------------------------------------------------------------------------------------------- |
| concat(str)                   | å­—ç¬¦ä¸²è¿æ¥å­—ç¬¦ä¸² str                                                                                      |
| length()                      | åˆ¤æ–­å­—ç¬¦ä¸²çš„é•¿åº¦                                                                                          |
| equals()                      | æ¯”è¾ƒäºŒä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰,åŒºåˆ†å¤§å°å†™                                                                                 |
| equalsIgnorceCase()           | ä¸åŒºåˆ†å¤§å°å†™                                                                                            |
| toUpperCase                   | è½¬æ¢ä¸ºå¤§å†™                                                                                             |
| toLowerCase                   | è½¬æ¢ä¸ºå°å†™                                                                                             |
| indexOf(String str)           | æŸ¥æ‰¾ å‚æ•° å­—ç¬¦ä¸² åœ¨åŸå§‹ å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡ å‡ºç°çš„ä½ç½®ç´¢å¼•ï¼Œæ²¡æœ‰æ‰¾åˆ°: è¿”å› -1                                                         |
| lastIndexOf(String str)       | æŸ¥æ‰¾ å‚æ•° å­—ç¬¦ä¸² åœ¨åŸå§‹ å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡ å‡ºç°çš„ä½ç½®ç´¢å¼• æ²¡æœ‰æ‰¾åˆ°: è¿”å› -1                                                        |
| charAt(index)                 | è·å¾—æŒ‡å®šç´¢å¼•çš„å­—ç¬¦                                                                                         |
| subString(int start)          | è·å–ä»ç´¢å¼•å¼€å§‹æˆªå–å­—ç¬¦ä¸²                                                                                      |
| subString(int Start ,int end) | æˆªå–\[start,end)èŒƒå›´çš„å­—ç¬¦ä¸²                                                                              |
| trim(String str)              | å»æ‰å­—ç¬¦ä¸²çš„å‰åç©ºæ ¼                                                                                        |
| replace(old,new)              | ä½¿ç”¨ new æ›¿æ¢ oldï¼Œå¯ä»¥æ›¿æ¢ç©ºæ ¼ç­‰ç‰¹æ®Šå­—ç¬¦                                                                         |
| startsWith()                  | åˆ¤æ–­æ˜¯å¦æŒ‡å®šçš„å‚æ•°å¼€å¤´                                                                                       |
| endsWith()                    | åˆ¤æ–­æ˜¯å¦æŒ‡å®šçš„å‚æ•°ç»“å°¾                                                                                       |
| comparreTo(å‚æ•°å¯¹è±¡)              | ä¸å‚æ•°å¯¹è±¡æ¯”è¾ƒå¤§å°ï¼Œ<br>ç›¸ç­‰:0<br/>å°:è´Ÿæ•°,æ¯”è¾ƒçš„åœ¨å‚è€ƒçš„ ASCII å‰ (æ ¹æ®å‚å•†çš„ä¸åŒ,å€¼ä¸åŒ) <br/>å¤§:æ­£æ•°,æ¯”è¾ƒçš„åœ¨å‚è€ƒçš„ ASCII å‰ (æ ¹æ®å‚å•†çš„ä¸åŒ,å€¼ä¸åŒ) |
| split(" ")                    | ç”¨å‚æ•°/(ç©ºæ ¼,æ­£åˆ™)å­—ç¬¦ä¸²é£æ ¼ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„                                                                          |
| toCharArray()                 | å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ•°ç»„                                                                                      |
| contains(String)              | æŒ‡å®šçš„å‚æ•°çš„å­—ç¬¦ä¸²åœ¨åŸå­—ç¬¦ä¸²ä¸­æ˜¯å¦å­˜åœ¨,ä¸å­˜åœ¨ä¸º false                                                                    |

## Java ä¸­çš„ç¼–ç è½¬æ¢

### å¸¸è§ä¹±ç åœºæ™¯

- æ–‡ä»¶è¯»å†™æœªæŒ‡å®šç¼–ç ï¼ˆå¦‚è¯¯ç”¨ç³»ç»Ÿé»˜è®¤ç¼–ç å¤„ç† UTF-8 æ–‡ä»¶ï¼‰ã€‚
- ç½‘ç»œä¼ è¾“ä¸­å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç¼–ç ä¸ä¸€è‡´ã€‚

### Java ä¸­çš„ç¼–ç è½¬æ¢

```java
// GBK â†’ UTF-8 çš„è½¬æ¢
String gbkStr = "ä½ å¥½";
byte[] gbkBytes = gbkStr.getBytes("GBK");
String utf8Str = new String(gbkBytes, "UTF-8"); // é”™è¯¯ï¼ä¼šä¹±ç 

// æ­£ç¡®æ–¹å¼éœ€è¦æ˜ç¡®è½¬ç 
String correctStr = new String(gbkBytes, "GBK");
byte[] utf8Bytes = correctStr.getBytes("UTF-8");

// æ˜¾å¼æŒ‡å®šå­—ç¬¦é›†
Files.readString(Path.of("file.txt"), StandardCharsets.UTF_8);
```

### æ£€æµ‹æ–‡ä»¶ç¼–ç 

```java
// ä½¿ç”¨juniversalchardetåº“æ£€æµ‹ç¼–ç ç±»å‹
FileInputStream fis = new FileInputStream("test.txt");
UniversalDetector detector = new UniversalDetector(null);
// ...ï¼ˆè¯»å–æ•°æ®å¹¶æ£€æµ‹ï¼‰
String encoding = detector.getDetectedCharset();
```

## æ§åˆ¶å°è¾“å…¥

### ä½¿ç”¨ Scanner ç±»è¯»å–è¾“å…¥

Scanner ç±»æ˜¯ Java 5 å¼•å…¥çš„ä¸€ä¸ªç®€å•æ–‡æœ¬æ‰«æå™¨ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä»æ§åˆ¶å°è¯»å–è¾“å…¥ã€‚

```java
import java.util.Scanner;

public class ConsoleInput {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);

        System.out.print("è¯·è¾“å…¥ä¸€ä¸ªæ•´æ•°: ");
        int num = scanner.nextInt();

        System.out.print("è¯·è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²: ");
        String str = scanner.next();  // è¯»å–å•ä¸ªå•è¯
        // String str = scanner.nextLine(); // è¯»å–æ•´è¡Œ

        System.out.println("ä½ è¾“å…¥çš„æ•´æ•°æ˜¯: " + num);
        System.out.println("ä½ è¾“å…¥çš„å­—ç¬¦ä¸²æ˜¯: " + str);

        scanner.close(); // å…³é—­Scanner
    }
}
```

### ä½¿ç”¨ BufferedReader è¯»å–è¾“å…¥

```java
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class BufferedReaderExample {
    public static void main(String[] args) throws IOException {
        BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));

        System.out.print("è¯·è¾“å…¥ä¸€è¡Œæ–‡æœ¬: ");
        String input = reader.readLine();

        System.out.println("ä½ è¾“å…¥çš„æ˜¯: " + input);

        reader.close();
    }
}
```

## æ ¼å¼åŒ–è¾“å‡º

Java æä¾›äº†å¤šç§æ ¼å¼åŒ–è¾“å‡ºçš„æ–¹å¼ï¼š

### æ ¼å¼è¯´æ˜ç¬¦

æ ¼å¼è¯´æ˜ç¬¦çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š

```sh
%[å‚æ•°ç´¢å¼•$][æ ‡å¿—][å®½åº¦][.ç²¾åº¦]è½¬æ¢å­—ç¬¦

å…¶ä¸­ï¼š

% æ˜¯å¿…éœ€çš„ï¼Œè¡¨ç¤ºæ ¼å¼è¯´æ˜ç¬¦çš„å¼€å§‹

å‚æ•°ç´¢å¼•$ æ˜¯å¯é€‰çš„ï¼ŒæŒ‡å®šä½¿ç”¨ç¬¬å‡ ä¸ªå‚æ•°ï¼ˆä»1å¼€å§‹ï¼‰

æ ‡å¿— æ˜¯å¯é€‰çš„ï¼Œæ§åˆ¶è¾“å‡ºçš„å¯¹é½ã€è¡¥ç™½ç­‰

å®½åº¦ æ˜¯å¯é€‰çš„ï¼ŒæŒ‡å®šæœ€å°å­—æ®µå®½åº¦

.ç²¾åº¦ æ˜¯å¯é€‰çš„ï¼Œå¯¹äºæµ®ç‚¹æ•°æŒ‡å®šå°æ•°ä½æ•°

è½¬æ¢å­—ç¬¦ æ˜¯å¿…éœ€çš„ï¼ŒæŒ‡å®šæ•°æ®ç±»å‹å’ŒåŸºæœ¬æ ¼å¼



```

**å¸¸ç”¨è½¬æ¢å­—ç¬¦**

| è½¬æ¢å­—ç¬¦ | é€‚ç”¨æ•°æ®ç±»å‹                 | è¯´æ˜              |
| :--- | :--------------------- | :-------------- |
| `%d` | byte, short, int, long | åè¿›åˆ¶æ•´æ•°           |
| `%f` | float, double          | åè¿›åˆ¶æµ®ç‚¹æ•°          |
| `%s` | String, Object         | å­—ç¬¦ä¸²             |
| `%c` | char                   | å­—ç¬¦              |
| `%b` | boolean                | å¸ƒå°”å€¼(true/false) |
| `%x` | æ•´æ•°ç±»å‹                   | åå…­è¿›åˆ¶æ•´æ•°(å°å†™)      |
| `%X` | æ•´æ•°ç±»å‹                   | åå…­è¿›åˆ¶æ•´æ•°(å¤§å†™)      |
| `%o` | æ•´æ•°ç±»å‹                   | å…«è¿›åˆ¶æ•´æ•°           |
| `%e` | float, double          | ç§‘å­¦è®¡æ•°æ³•(å°å†™)       |
| `%E` | float, double          | ç§‘å­¦è®¡æ•°æ³•(å¤§å†™)       |
| `%t` | Date, Calendar         | æ—¥æœŸæ—¶é—´(éœ€è¦é¢å¤–è¯´æ˜ç¬¦)   |
| `%n` | æ—                       | å¹³å°ç‰¹å®šçš„æ¢è¡Œç¬¦        |
| `%%` |                        | è¾“å‡ºä¸€ä¸ªç™¾åˆ†å·         |

### ä½¿ç”¨ System.out.printf()

```java
public class FormatOutput {
    public static void main(String[] args) {
        String name = "å¼ ä¸‰";
        int age = 25;
        double salary = 12345.6789;

        // åŸºæœ¬æ ¼å¼åŒ–
        System.out.printf("å§“å: %s, å¹´é¾„: %d, å·¥èµ„: %.2f%n", name, age, salary);
        //æ˜¾ç¤ºå°æ•°%fï¼Œæ•´æ•°%dï¼Œå­—ç¬¦%cï¼Œå¸ƒå°”%bï¼Œ
        double sum = 3.1415927;
        System.out.printf("ç»“æœæ˜¯ï¼š%f\n", sum);			//ç»“æœæ˜¯ï¼š3.141593
        System.out.printf("ç»“æœæ˜¯ï¼š%.2f\n", sum);		//ç»“æœæ˜¯ï¼š3.14

        // æ§åˆ¶å®½åº¦å’Œå¯¹é½
        System.out.printf("|%-10s|%10d|%10.2f|%n", name, age, salary);
    }
}
```

### ä½¿ç”¨ String.format()

```java
public class StringFormat {
    public static void main(String[] args) {
        String formatted = String.format("å½“å‰æ—¶é—´: %tT", new java.util.Date());
        System.out.println(formatted);
    }
}
```

### ä½¿ç”¨ java.util.Formatter ç±»

```java
import java.util.Formatter;

public class FormatterExample {
    public static void main(String[] args) {
        StringBuilder sb = new StringBuilder();
        Formatter formatter = new Formatter(sb);

        formatter.format("PI = %.5f", Math.PI);
        System.out.println(sb.toString());

        formatter.close();

    }
}
```

### DecimalFormat

```java
DecimalFormat df=new DecimalFormat("0000.00");
System.out.println(df.format(46.65657));	//0046.66

DecimalFormat df1=new DecimalFormat("####.##");
System.out.println(df1.format(45.654657));	//45.65

DecimalFormat df1=new DecimalFormat(".00");
System.out.println(df1.format(45.6));	//45.60
```

## æ–‡ä»¶è¾“å…¥ä¸è¾“å‡º

### ä½¿ç”¨ File ç±»

```java
import java.io.File;

public class FileExample {
    public static void main(String[] args) {
        File file = new File("example.txt");

        System.out.println("æ–‡ä»¶æ˜¯å¦å­˜åœ¨: " + file.exists());
        System.out.println("æ–‡ä»¶å: " + file.getName());
        System.out.println("æ–‡ä»¶è·¯å¾„: " + file.getAbsolutePath());
        System.out.println("æ˜¯å¦æ˜¯æ–‡ä»¶: " + file.isFile());
        System.out.println("æ˜¯å¦æ˜¯ç›®å½•: " + file.isDirectory());
    }
}
```

### æ–‡ä»¶å†™å…¥

#### ä½¿ç”¨ FileWriter

```java
import java.io.FileWriter;
import java.io.IOException;

public class FileWriteExample {
    public static void main(String[] args) {
        try (FileWriter writer = new FileWriter("output.txt")) {
            writer.write("Hello, World!\n");
            writer.write("è¿™æ˜¯ç¬¬äºŒè¡Œ\n");
            writer.append("è¿™æ˜¯è¿½åŠ çš„å†…å®¹\n");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

#### ä½¿ç”¨ BufferedWriter

```java
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;

public class BufferedWriterExample {
    public static void main(String[] args) {
        try (BufferedWriter writer = new BufferedWriter(new FileWriter("buffered.txt"))) {
            writer.write("ç¬¬ä¸€è¡Œ");
            writer.newLine(); // æ¢è¡Œ
            writer.write("ç¬¬äºŒè¡Œ");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

### æ–‡ä»¶è¯»å–

#### ä½¿ç”¨ Scanner

```java
try (Scanner in = new Scanner(Files.newInputStream(Paths.get("niyflle.txt")), "UTF-8")) {
    while (in.hasNextLine()) {
        String line = in.nextLine();
        System.out.println(line);
    }
} catch (IOException e) {
    System.err.println("è¯»å–æ–‡ä»¶å‡ºé”™: " + e.getMessage());
    // æˆ–è€… e.printStackTrace();
}
```

#### ä½¿ç”¨ FileReader

```java
import java.io.FileReader;
import java.io.IOException;

public class FileReadExample {
    public static void main(String[] args) {
        try (FileReader reader = new FileReader("input.txt")) {
            int ch;
            while ((ch = reader.read()) != -1) {
                System.out.print((char) ch);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

#### ä½¿ç”¨ BufferedReader

```java
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class BufferedReaderFileExample {
    public static void main(String[] args) {
        try (BufferedReader reader = new BufferedReader(new FileReader("input.txt"))) {
            String line;
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

### ä½¿ç”¨ Java NIO Files ç±» (Java 7+)

```java
import java.nio.file.Files;
import java.nio.file.Paths;
import java.nio.file.StandardOpenOption;
import java.io.IOException;
import java.util.List;

public class NIOFilesExample {
    public static void main(String[] args) {
        // å†™å…¥æ–‡ä»¶
        try {
            Files.write(Paths.get("nio.txt"),
                       "Hello NIO".getBytes(),
                       StandardOpenOption.CREATE);

            // è¿½åŠ å†…å®¹
            Files.write(Paths.get("nio.txt"),
                       "\nè¿½åŠ å†…å®¹".getBytes(),
                       StandardOpenOption.APPEND);

            // è¯»å–æ‰€æœ‰è¡Œ
            List<String> lines = Files.readAllLines(Paths.get("nio.txt"));
            lines.forEach(System.out::println);

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

## äºŒè¿›åˆ¶æ–‡ä»¶æ“ä½œ

### ä½¿ç”¨ DataOutputStream å’Œ DataInputStream

```java
import java.io.*;

public class BinaryFileExample {
    public static void main(String[] args) {
        // å†™å…¥äºŒè¿›åˆ¶æ–‡ä»¶
        try (DataOutputStream out = new DataOutputStream(
                new FileOutputStream("data.bin"))) {
            out.writeInt(123);
            out.writeDouble(123.456);
            out.writeUTF("Hello Binary");
        } catch (IOException e) {
            e.printStackTrace();
        }

        // è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶
        try (DataInputStream in = new DataInputStream(
                new FileInputStream("data.bin"))) {
            System.out.println(in.readInt());
            System.out.println(in.readDouble());
            System.out.println(in.readUTF());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

### ä½¿ç”¨ ObjectOutputStream å’Œ ObjectInputStream (å¯¹è±¡åºåˆ—åŒ–)

```java
import java.io.*;

class Person implements Serializable {
    private static final long serialVersionUID = 1L;
    String name;
    int age;

    Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    @Override
    public String toString() {
        return name + " (" + age + ")";
    }
}

public class ObjectSerialization {
    public static void main(String[] args) {
        // åºåˆ—åŒ–å¯¹è±¡åˆ°æ–‡ä»¶
        try (ObjectOutputStream out = new ObjectOutputStream(
                new FileOutputStream("person.ser"))) {
            out.writeObject(new Person("å¼ ä¸‰", 25));
        } catch (IOException e) {
            e.printStackTrace();
        }

        // ä»æ–‡ä»¶ååºåˆ—åŒ–å¯¹è±¡
        try (ObjectInputStream in = new ObjectInputStream(
                new FileInputStream("person.ser"))) {
            Person p = (Person) in.readObject();
            System.out.println(p);
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}
```
